# 前端路由:
_学习文档:https://router.vuejs.org/zh/guide/_

## 前端路由的概念:
_查看网址:https://www.bilibili.com/video/BV15741177Eh?p=101&spm_id_from=pageDriver_

## 安装vue-router:
_自己安装vue-router(如果脚手架没安装的话):_
`npm install vue-router --save`

## 使用vuerouter步骤:
- #### 第一步: 创建路由组件.
就是在src/components文件夹下面创建.vue的组件文件.
- #### 第二步: 配置路由映射: 组件和路由映射关系.
打开src/router/index.js路由配置文件,编辑routes数组:

```js
//引用的信息
import Vue from 'vue'
import Router from 'vue-router'
import HelloWorld from '@/components/HelloWorld'
import Home from '@/components/Home.vue'
import About from '@/components/About.vue'

//1.通过Vue.use(插件),安装插件:
Vue.use(Router)

//2.创建路由对象:
export default new Router({
	//配置路由与组件之间的映射关系
  routes: [
		{
			path: '/home',
			component: Home
		},
		{
			path: '/about',
			component: About
		}
  ]
})

```

- #### 第三步: 使用路由: 通过`<router-link>` 和`<router-view>`标签:
这里我直接修改main.js引用的App.vue文件作为示例:

```js
<template>
  <div id="app">
		<!-- router-link设置路由跳转,router-link类似于a标签. -->
		<router-link to="/home">主页</router-link>
		<router-link to="/about">关于</router-link>
		<!-- router-view表示路由跳转之后渲染的东西要渲染在哪个位置(渲染占位). -->
		<router-view></router-view>
  </div>
</template>

<script>
export default {
  name: 'App'
}
</script>
<style>
#app {
  font-family: 'Avenir', Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
</style>

```

## 设置默认路由与路由模式:
打开src/router/index.js路由配置文件,编辑routes数组:

```js
...
export default new Router({
	//配置路由与组件之间的映射关系
  routes: [
		{
			//设置默认路由
			path:'/',
			//重定向
			redirect:'/home'
		},
		{
			path: '/home',
			component: Home
		},
		{
			path: '/about',
			component: About
		}
  ],
	//设置路由模式为history,默认为hash
	mode:'history'
})

```

## 关于router-link一些补充:
- ### 在router-link中有一些其他属性:
#### 1.tag属性:可以指定`<router-link>`渲染成什么组件,例如tag='button'就会被渲染成button而不是a标签,示例:
`<router-link to="/home" tag="button">主页</router-link>`
#### 2.replace:指定当前前端路由的时候不会留下history记录,后退键不能返回上一个页面.示例:
`<router-link to="/home" replace>主页</router-link>`
#### 3.active-class:当前这种属性有三种使用方式:
    _1.首先就是没有设置的时候哪个router-link标签处于活跃状态的时候vue就会添加router-link-active在class属性中,这时候我们在style设置router-link-active就行._
	_2._我们在router-link标签设置active-class属性这个属性就会让该标签处于活跃状态的时候添加你设置的类,示例:`<router-link to="/about" replace active-class="active">关于</router-link>`
	3.在路由配置文件index.js中配置标签处于活跃状态的时候添加的类,示例:
	```js
	...
	export default new Router({
	...
	//设置标签活跃时添加的类
	linkActiveClass:'active'
})
	```

## 在代码中实现跳转路由：
`this.$router.push('/pageName')`
`this.$router.replace('/pageName')`

## 动态路由的使用:
- #### 首先在src/router/index.js路由配置文件配置动态路由.

```js
...
import User from '@/components/User.vue'
...
export default new Router({
  routes: [
		...
		{
			//用:绑定动态路由参数
			path:'/user/:username',
			component: User
		},
	...
  ],
...
})
```

- #### 在跳转的页面获取动态路由所绑定的参数.

```js
//$route指的时在$router中活跃的哪个路由
this.$route.params.username
```

- #### 一般动态路由的参数都是动态绑定的.

```html
<router-link :to="'/user/' + username">用户</router-link>
```

## 路由的懒加载:
_懒加载即:在webpakc打包的时候我们不设置懒加载的时候webpack就会把所有的代码打包成一个js文件,这会导致打包出的js文件过大，客户端请求文件的时候会等很久,这时候我们就用懒加载把每个路由分成一个个的js文件,使用的时候客户端再从服务端请求._
- ####懒加载的使用(在src/router/index.js路由配置文件中使用).

```js
export default new Router({
	//配置路由与组件之间的映射关系
  routes: [
  		...
		{
			path: '/home',
			component: ()=>import('@/components/Home.vue')
		}
		...
  ],
...
})
```

- #### 或者(推荐这样):

```js
...
//声明懒加载的导入方式
let Home = ()=>import('@/components/Home.vue')
...
export default new Router({
	//配置路由与组件之间的映射关系
  routes: [
  		...
		{
			path: '/home',
			component: Home
		}
		...
  ],
...
})
```

## 嵌套路由:
_嵌套路由就是在跳转路由之后**渲染出来的地方**继续选择跳转路由在**刚刚渲染出的地方**继续选择**需要渲染的地方**渲染界面(文化水平有限)._
- #### 创建两个.vue组件:
HomeMessage.vue:

```js
<template>
	<ul>
		<li>天气1</li>
		<li>天气2</li>
		<li>天气3</li>
		<li>天气4</li>
	</ul>
</template>
<script>
</script>
<style>
</style>

```

HomeNews:

```js
<template>
	<ul>
		<li>新闻1</li>
		<li>新闻2</li>
		<li>新闻3</li>
		<li>新闻4</li>
	</ul>
</template>
<script>
</script>
<style>
</style>

```

- #### 在src/router/index.js路由配置文件中声明嵌套路由:

```js
...
export default new Router({
	//配置路由与组件之间的映射关系
  routes: [
  		...
		{
			path: '/home',
			component: Home,
			//嵌套路由
			children:[
				{
					//设置嵌套路由的默认路由
					path: '',
					component:HomeMessage,
				},
				{
					//记得不要加斜杠
					path: 'message',
					component:HomeMessage,
				},
				{
					path: 'news',
					component:HomeNews
				}
			]
		},
		...
  ],
...
})
```

- #### 在父路由中声明路由跳转与跳转之后渲染的地方.

```js
<template>
	<div>
		<h2>主页.</h2>
		<!-- 声明嵌套路由(这里填入的是全路径) -->
		<router-link to="/home/message">消息</router-link>
		<router-link to="/home/news">新闻</router-link>
		<router-view></router-view>
	</div>
</template>
<script>
</script>
<style>
</style>

```

## 前端路由的参数传递跳转:
- #### 带参数的前端路由跳转方式有两种:
	1.首先是用router-link的方式跳转传递参数:
	`<router-link :to="{path:'/profile',query:{name:'张三',age:20}}">文档</router-link>`
	这种方式用v-bind的方式绑定跳转的参数,path指定的是跳转的路径,query中指定的是跳转所带的参数.
	2.使用方法来带参数的跳转:
	```js
	goProfile(){
			this.$router.push({
				path:'/profile',
				query:{
					name:'张三',
					age:20
				}
			})
		}
	```
	以上两种方式都会以拼接url的方式传递参数(即http://xxxxxx?key=value).

- #### 获取跳转过来所携带的参数:

```js
//其中query就是以key=value保存这所有传递过来信息的属性
$route.query.valueName
```

## 导航守卫(类似于监听器):
- #### 提个关于vue的知识小补充：

```js
...
<script>
	export default{
		name:'Home',
		data(){
			return{
				msg:'主页.'
			}
		},
		created() {
			//创建vue模板的时候会回调函数	
			console.log('模板开始创建.')
		},
		mounted() {
			//当template标签中所有元素挂载完毕就会回调该函数
			console.log('template元素挂载完毕.')
		},
		updated() {
			//当template中元素更新之后就会回调该函数.
			console.log('template元素中元素更新.')	
		}
	}
</script>
...
```

- #### 在src/router/index.js路由配置文件中配置配置元数据:

```js
import Router from 'vue-router'
...
let router = new Router({
	routes: [
		...
		{
			//用:绑定动态路由参数
			path:'/user/:username',
			component: User,
			meta:{
				//设置标题
				title:'用户'
			}
		}
		...
	]
})
...
```

- #### 在src/router/index.js路由配置文件中配置导航守卫:

```js
...
import Router from 'vue-router'
...
//这里设置的是全局导航守卫(类似于监听器)
//设置前置钩子hook(回调函数)
router.beforeEach((to, from, next) => {
	//这个函数会在跳转路由的时候回调,一定要调用next()函数,要不然不会执行跳转
	//设置当前路由的标题
	document.title = to.matched[0].meta.title
	//一定要有执行next函数,next()才能执行下一步
	console.log('开始页面条跳转.')
	next()
	//终止当前跳转
	//next(false)
	//跳转到xxx界面
	// next({
	// 	path:'xxx',
	// 	query:{
	// 		key:'value'
	// 	}
	// })
})
//设置后置钩子hook(回调函数)
router.afterEach((to,from)=>{
	//此函数会在页面跳转完毕之后调用
	console.log('跳转完毕.')
})
```

- #### 配置路由独享的守卫:

```js
...
let router = new Router({
	routes: [
		...
		{
			//用:绑定动态路由参数
			path:'/user/:username',
			component: User,
			meta:{
				//设置标题
				title:'用户'
			},
			beforeEnter: (to, from, next) => {
				console.log('将要进入用户界面.')
				next()
			}
		}
		...
	]
})

```

# keep-alive标签:
- #### keep-alive能让被渲染出来的组件能被保存下来,不被反复创建.

```html
	<keep-alive exclude="Profile,User">
		<router-view></router-view>
	</keep-alive>
```

- #### 其中有两个属性:
	1.exclude:用正则的方式表示排除哪些模板.
	2.include:用正则的方式表示包含哪些模板.
	**Tipe:上面两种方式都要保证组件的data属性中要包含name属性.**

